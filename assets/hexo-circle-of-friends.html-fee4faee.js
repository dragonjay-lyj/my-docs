import{_ as n}from"./plugin-vue_export-helper-c27b6911.js";import{r as i,o as s,c as a,a as e,b as o,d as c,e as d}from"./app-b0b395c3.js";const r={},l=d('<h1 id="back-end-deployment" tabindex="-1"><a class="header-anchor" href="#back-end-deployment" aria-hidden="true">#</a> Back-end deployment</h1><p>Where github is cloud deployment (serverless deployment)</p><h2 id="github-deployment" tabindex="-1"><a class="header-anchor" href="#github-deployment" aria-hidden="true">#</a> github deployment</h2><blockquote><p><strong>Be careful</strong> not to change the repository name <strong>when you fork</strong></p></blockquote><h3 id="github-sqlite-deployment" tabindex="-1"><a class="header-anchor" href="#github-sqlite-deployment" aria-hidden="true">#</a> github+sqlite deployment</h3><p>This is the default deployment i.e.: github+sqlite+vercel</p><p>Deployment Methods:</p>',7),h={href:"https://github.com/Rock-Candy-Tea/hexo-circle-of-friends",target:"_blank",rel:"noopener noreferrer"},p=d(`<p>Edit the <code>/hexo_circle_of_friends/fc_settings.yaml</code> file with the following configuration changes:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#abb2bf;">LINK:</span></span>
<span class="line"><span style="color:#abb2bf;">    - {link: &quot;https://en.dragonjay.top/link/&quot;, theme: &quot;common2&quot;}  # Change link to your link page address and choose your blog theme for theme.</span></span>
<span class="line"><span style="color:#abb2bf;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Then click on the rope&#39;s<code>Settings--&gt;Secrets--&gt;New repository secret</code></p><p><img src="https://fcircle-doc.yyyzyyyz.cn/QQ图片20220205080305.png" alt="QQ图片20220205080305"></p><p>Add 4 environment variables secret:</p>`,5),y=e("li",null,[e("code",null,"GH_NAME"),o("：The github name, which is your username")],-1),u=e("li",null,[e("code",null,"GH_EMAIL"),o("：github email, fill in the email you registered github")],-1),_=e("code",null,"GH_TOKEN",-1),g={href:"https://docs.github.com/cn/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token",target:"_blank",rel:"noopener noreferrer"},m=e("code",null,"Select scopes",-1),f=e("code",null,"repo",-1),b=e("code",null,"workflow",-1),E=e("li",null,[e("code",null,"STORAGE_TYPE"),o("：Storage method, fill in "),e("code",null,"sqlite"),o(".")],-1),k=e("p",null,[e("img",{src:"https://fcircle-doc.yyyzyyyz.cn/image-20221008230906574.png",alt:"image-20221008230906574"})],-1),v=e("p",null,"When the configuration is complete, it should look like the following:",-1),A=e("p",null,[e("img",{src:"https://fcircle-doc.yyyzyyyz.cn/image-20221009000607317.png",alt:"image-20221009000607317"})],-1),S=e("p",null,[o("Then click on the rope's"),e("code",null,"setting-->Actions-->General-->check Read and write permissions-->Save")],-1),T=e("p",null,[e("img",{src:"https://fcircle-doc.yyyzyyyz.cn/workflow_permissions.png",alt:""})],-1),G={href:"https://vercel.com/",target:"_blank",rel:"noopener noreferrer"},w=d('<p>Click <code>New Project</code> to create a new project</p><p>Find <code>Import Git Repository</code> and you should see the repository you just <code>forked</code>, click <code>Import</code>.</p><p><img src="https://fcircle-doc.yyyzyyyz.cn/QQ截图20220205082743.png" alt="QQ截图20220205082743"></p><p>Then click <code>Deploy</code> and go back to the home page, wait a while and the deployment should complete.</p><p>To add vercel environment variables, go to the home page of the project you just created and click <code>Settings--&gt;Environment Variables</code>.</p><p><img src="https://fcircle-doc.yyyzyyyz.cn/image-20221008231737297.png" alt="image-20221008231737297"></p><p>Same as the previous secret, add <code>GH_NAME</code>, <code>GH_EMAIL</code>, <code>GH_TOKEN</code>, in addition to <code>VERCEL_ACCESS_TOKEN</code>, obtained as follows:</p><p>Click <code>Settings--&gt;Tokens--&gt;Create</code> in the upper right corner of the vercel page.</p><p><img src="https://fcircle-doc.yyyzyyyz.cn/image-20221008231925321.png" alt="image-20221008231925321"></p><p>After entering a random name, click <code>CREATE TOKEN</code>, copy the generated token and add it to the vercel environment variable</p><p><img src="https://fcircle-doc.yyyzyyyz.cn/image-20221008232056360.png" alt="image-20221008232056360"></p><p>When the addition is complete, it should look as shown below:</p><p><img src="https://fcircle-doc.yyyzyyyz.cn/image-20221008232407601.png" alt="image-20221008232407601"></p><p>Next, go back to github and enable github action for the repository after <code>fork</code> and click on the<code>Actions--&gt;I understand my workflows, go ahead and enable them</code></p><p><img src="https://fcircle-doc.yyyzyyyz.cn/QQ截图20220205081120.png" alt="QQ截图20220205081120"></p><p>After that click <code>update-friends-posts</code> and enable <code>workflow</code></p><p><img src="https://fcircle-doc.yyyzyyyz.cn/QQ截图20220205081424.png" alt="QQ截图20220205081424"></p><p>Then click <code>Run workflow---&gt;Run workflow</code> to run it for the first time.</p><p><img src="https://fcircle-doc.yyyzyyyz.cn/image-20221008232746973.png" alt="image-20221008232746973"></p><p>After waiting for the run to finish, the repository should upload <code>data.db</code> and the vercel should be updated synchronously.</p>',20),N=e("code",null,"DOMAINS",-1),O={href:"https://hexo-friendcircle4-api.vercel.app%2C/",target:"_blank",rel:"noopener noreferrer"},M=e("code",null,"/all",-1),C=d('<p><img src="https://fcircle-doc.yyyzyyyz.cn/QQ截图20220205083633.png" alt="QQ截图20220205083633"></p><p>At this point, the back-end part of the build is complete.</p><ul><li><p>If using sqlite, the secret that needs to be added to the repository is: <code>STORAGE_TYPE</code>, <code>GH_NAME</code>, <code>GH_EMAIL</code>, <code>GH_TOKEN</code>, where <code>STORAGE_TYPE</code> has the value <code>sqlite</code>.</p></li><li><p>If using leancloud, the secret that needs to be added to the repository is: <code>STORAGE_TYPE</code>, <code>APPID</code>, <code>APPKEY</code>, where <code>STORAGE_TYPE</code> has the value <code>leancloud</code>.</p></li><li><p>If mysql is used, the secret that needs to be added to the repository is <code>STORAGE_TYPE</code>, <code>MYSQL_USERNAME</code>, <code>MYSQL_PASSWORD</code>, <code>MYSQL_IP</code>, <code>MYSQL_PORT</code>, <code>MYSQL_DB</code>, where <code>STORAGE_TYPE</code> has the value <code>mysql</code>.</p></li><li><p>If using mongodb, the secret that needs to be added to the repository is: <code>STORAGE_TYPE</code>, <code>MONGODB_URI</code>, where <code>STORAGE_TYPE</code> has the value <code>mongodb</code>.</p></li></ul><p>Once the github environment variables are set, you also need to set the vercel environment variables, where <code>VERCEL_ACCESS_TOKEN</code>, <code>GH_TOKEN</code>, <code>GH_NAME</code>, <code>GH_EMAIL</code> must be added to provide access to the backend administration, again depending on how you store it:</p><ul><li>If using sqlite, the environment variables that vercel needs to add are <code>VERCEL_ACCESS_TOKEN</code>, <code>GH_TOKEN</code>, <code>GH_NAME</code>, <code>GH_EMAIL</code>.</li><li>If using leancloud, the environment variables that vercel needs to add are: <code>VERCEL_ACCESS_TOKEN</code>, <code>GH_TOKEN</code>, <code>GH_NAME</code>, <code>GH_EMAIL</code>, <code>APPID</code>, <code>APPKEY</code>.</li><li>If using mysql, the environment variables that vercel needs to add are: <code>VERCEL_ACCESS_TOKEN</code>, <code>GH_TOKEN</code>, <code>GH_NAME</code>, <code>GH_EMAIL</code>, <code>MYSQL_USERNAME</code>, <code>MYSQL_PASSWORD</code>, <code>MYSQL_IP</code>, <code>MYSQL_PORT</code>, <code>MYSQL_DB</code>.</li><li>If using mongodb, the environment variables that vercel needs to add are <code>VERCEL_ACCESS_TOKEN</code>, <code>GH_TOKEN</code>, <code>GH_NAME</code>, <code>GH_EMAIL</code>, <code>MONGODB_URI</code>.</li></ul>',5);function Q(R,I){const t=i("ExternalLinkIcon");return s(),a("div",null,[l,e("p",null,[o("The project repository for fork Friendlink Friendship Circle, address:"),e("a",h,[o("https://github.com/Rock-Candy-Tea/hexo-circle-of-friends"),c(t)])]),p,e("ul",null,[y,u,e("li",null,[_,o("：github access token, to get it, please refer to "),e("a",g,[o("official documentation"),c(t)]),o("，Where "),m,o(" selects "),f,o(" and "),b,o(".")]),E]),k,v,A,S,T,e("p",null,[o("Go to "),e("a",G,[o("vercel official website"),c(t)]),o("，Create an account directly with github and bind it with your cell phone number.")]),w,e("p",null,[o("Go to vercel and find the address under "),N,o(" in the project, for example:"),e("a",O,[o("https://hexo-friendcircle4-api.vercel.app，"),c(t)]),o(" Splicing "),M,o(" after this address to try to access it, and the data appearing means that the configuration was successful, and this address is the api address needed by the front-end.")]),C])}const H=n(r,[["render",Q],["__file","hexo-circle-of-friends.html.vue"]]);export{H as default};
